# ğŸ“– ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© - 2021.12.02

- ì‹œë§¨í‹± ë²„ì „ ê·œì¹™
- ë¼ìš°í„°
- ë¯¸ë“¤ì›¨ì–´
- .env
- REST API

## ğŸ“ ì‹œë§¨í‹± ë²„ì „ ê·œì¹™

- íŒ¨ì¹˜ ë²„ì „ Z : í•˜ìœ„ í˜¸í™˜ì„ í•˜ì§€ë§Œ ë²„ê·¸ ìˆ˜ì •ì´ ìˆì„ ë•Œ ì˜¬ë¼ê°„ë‹¤. ë²„ê·¸ ìˆ˜ì •ì€ ë‚´ë¶€ì ìœ¼ë¡œ ì˜ëª» ì²˜ë¦¬ë˜ê³  ìˆëŠ” ê²ƒì„ ê³ ì¹˜ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
- ì‘ì€ ë²„ì „ Y : ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆì§€ë§Œ ê¸°ì¡´ì˜ ê³µê°œ APIê°€ í•˜ìœ„ í˜¸í™˜ë˜ê³  ìˆì„ ë•Œ ì˜¬ë¼ê°„ë‹¤. ì´ëŠ” íŒ¨ì¹˜ ìˆ˜ì¤€ì˜ ë³€í™”ë¥¼ í¬í•¨í•  ìˆ˜ ìˆìœ¼ë‚˜, ì‘ì€ ë²„ì „ì´ ì˜¬ë¼ê°€ë©´ íŒ¨ì¹˜ ë²„ì „ì€ ê¼­ 0ì´ ë˜ì–´ì•¼ í•œë‹¤.
- ì£¼ìš” ë²„ì „ X : í•˜ìœ„ í˜¸í™˜ë˜ì§€ ì•ŠëŠ” ë³€í™”ê°€ ì¶”ê°€ë  ë•Œ ë°˜ë“œì‹œ ì˜¬ë¼ê°€ì•¼ í•œë‹¤. ì´ëŠ” íŒ¨ì¹˜ ìˆ˜ì¤€ê³¼ ì‘ì€ ìˆ˜ì¤€ì˜ ë³€í™”ë¥¼ í¬í•¨í•  ìˆ˜ ìˆìœ¼ë‚˜, ì£¼ìš” ë²„ì „ì´ ì˜¬ë¼ê°€ë©´ ì‘ì€ ë²„ì „ê³¼ íŒ¨ì¹˜ ë²„ì „ì€ ê¼­ 0ì´ ë˜ì–´ì•¼ í•œë‹¤.

## ğŸ“ ë¼ìš°í„°ë€?

- í•˜ë‚˜ì˜ í˜ì´ì§€ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œ `app.get()`ì„ ì‚¬ìš©í–ˆë‹¤.
- ë§Œì•½ì— ë°°ë¯¼ì„ ì›¹ ë²„ì „ìœ¼ë¡œ ì¶œì‹œí•œë‹¤ë©´ í•„ìš”í•œ í˜ì´ì§€ë¡œëŠ” íšŒì›ê°€ì…, ê°€ê²Œ ëª©ë¡, ê°€ê²Œ ì •ë³´, ì´ë²¤íŠ¸ ëª©ë¡, ê²°ì œ, í”„ë¡œí•„, ë¦¬ë·° ë“± ë§ë‹¤. ì´ ë§ì€ í˜ì´ì§€ë¥¼ app.jsì— app.getìœ¼ë¡œ í•œ íŒŒì¼ì— ë„£ê¸°ì—” ë¬´ë¦¬ë‹¤.
- app.jsì— ë¼ìš°í„°ë¥¼ ë§Œë“¤ê³  ë¼ìš°í„° íŒŒì¼ì„ ì—°ê²°í•´ ì¤€ë‹¤. â‡’ êµ¬ì¡°ì ìœ¼ë¡œ ì§¤ ìˆ˜ ìˆë‹¤.
  - ì˜ˆë¥¼ ë“¤ë©´ ê°€ê²Œ ê´€ë ¨ ë”°ë¡œ, í”„ë¡œí•„ ë”°ë¡œ ë“±ë“± ë‚˜ëˆ ì¤€ë‹¤.
- RouteëŠ” í•´ì„í•˜ë©´ `ê¸¸`ì´ë‹¤. ì¦‰, ë¼ìš°í„°ëŠ” ì–´ëŠ í˜ì´ì§€ë¡œ ë³´ë‚¼ì§€ ê²°ì •í•´ ì¤€ë‹¤.

```javascript
const express = require("express");
const path = require("path");

// routesì— ìˆëŠ” index.js ê°€ì ¸ì˜¤ê¸°
const index = require("./routes/index");

const app = express();
const port = 9999;

// http:localhost:9999/
app.get("/", (req, res) => {
  res.send("hello");
});

// http:localhost:9999/hello
app.get("/hello", (req, res) => {
  // íŒŒì¼ ë³´ë‚´ê¸°
  //path.join()ëŠ” 2ê°œ ì„œë¡œ ë‹¤ë¥¸ ê²½ë¡œë¥¼ í•©ì³ì¤€ë‹¤.
  res.sendFile(path.join(__dirname, "./static/index.html"));
});

app.listen(port, () => {
  console.log(`${port}ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ê°€ ëŒì•„ê°€ê³  ìˆì–´ìš”!`);
});
```

## ğŸ“ ë¼ìš°íŒ… í•´ë³´ê¸°

**ğŸ›  app.js**

```javascript
const express = require("express");
const path = require("path");

// reoutesì— ìˆëŠ” index.js ê°€ì ¸ì˜¤ê¸°
const index = require("./routes/index");

const app = express();
const port = 9999;

// routesì˜ index ì—°ê²°
app.use("/routes", index);

app.listen(port, () => {
  console.log(`${port}ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ê°€ ëŒì•„ê°€ê³  ìˆì–´ìš”!`);
});
```

**ğŸ›  /routes/index.js**

```javascript
const express = require("express");

// ** routerë¡œ ìƒì„±
const router = express.Router();

// appì´ ì•„ë‹Œ router
router.get("/", (req, res) => {
  res.send("ì•ˆë…•!");
});

// ë‹¤ë¥¸ íŒŒì¼ì—ì„œ index.jsì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ exportsë¡œ ë¹¼ì£¼ê¸°
module.exports = router;
```

### ğŸ“• ê°’ ë„£ì–´ì„œ ë„˜ê²¨ì£¼ê¸°

```javascript
const express = require("express");

// ** routerë¡œ ìƒì„±
const router = express.Router();

// appì´ ì•„ë‹Œ router
router.get("/", (req, res) => {
  res.send("ì•ˆë…•!");
});

// ë™ì ìœ¼ë¡œ ê°’ ë„£ì–´ì£¼ê¸°
router.get("/is_odd_1/:id", (req, res) => {
  const id = parseInt(req.params.id); // id ê°’ ê°€ì ¸ì˜¤ê¸°

  if (isNaN(id)) res.send("ì•„ ìˆ«ìë§Œ ë„£ìœ¼ë¼ê³  --;;");
  else if (id % 2 === 0) res.send(`${id}ëŠ” ì§ìˆ˜ì—ìš”!`);
  else res.send(`${id}ëŠ” í™€ìˆ˜ì—ìš”!`);
});

// ë‹¤ë¥¸ íŒŒì¼ì—ì„œ index.jsì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ exportsë¡œ ë¹¼ì£¼ê¸°
module.exports = router;
```

- /search/(:numver)/:(option1)/:(option2) â‡’ ì´ë ‡ê²Œ ì›¹ì‚¬ì´íŠ¸ë¥¼ ì„¤ê³„í•˜ëŠ” ê²ƒì€ ë„ˆë¬´ ì§€ì €ë¶„í•˜ë‹¤!! â‡’ formíƒœê·¸ì˜ methodë¥¼ í™œìš©í•˜ì!

### ğŸ“• ê°’ ë„£ì–´ì„œ ë„˜ê²¨ì£¼ê¸° ë¦¬íŒ©í† ë§

```javascript
const express = require("express");
const path = require("path");

// ** routerë¡œ ìƒì„±
const router = express.Router();

// appì´ ì•„ë‹Œ router
router.get("/", (req, res) => {
  res.send("ì•ˆë…•!");
});

// ë™ì ìœ¼ë¡œ ê°’ ë„£ì–´ì£¼ê¸°
router.get("/is_odd_1/:id", (req, res) => {
  const id = parseInt(req.params.id);

  if (isNaN(id)) res.send("ì•„ ìˆ«ìë§Œ ë„£ìœ¼ë¼ê³  --;;");
  else if (id % 2 === 0) res.send(`${id}ëŠ” ì§ìˆ˜ì—ìš”!`);
  else res.send(`${id}ëŠ” í™€ìˆ˜ì—ìš”!`);
});

router.get("/is_odd_2_page", (req, res) => {
  res.sendFile(path.join(__dirname, "../static/get_test.html"));
});

router.get("/is_odd_2", (req, res) => {
  // paramsê°€ queryë¡œ ë°”ë€œ
  // numberëŠ” formíƒœê·¸ ì•ˆì— ìˆëŠ” nameê°’ì´ number, query stringëŠ” form íƒœê·¸ë¡œ ë³´ë‚¸ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë°›ì•„ì˜´
  const id = parseInt(req.query.number);

  // http://localhost:9999/routes/is_odd_2?number=23 ì´ë ‡ê²Œ ì£¼ì†Œ ì „ë‹¬ ëœë‹¤.
  if (isNaN(id)) res.send("ì•„ ìˆ«ìë§Œ ë„£ìœ¼ë¼ê³  --;;");
  else if (id % 2 === 0) res.send(`${id}ëŠ” ì§ìˆ˜ì—ìš”!`);
  else res.send(`${id}ëŠ” í™€ìˆ˜ì—ìš”!`);
});

// ë‹¤ë¥¸ íŒŒì¼ì—ì„œ index.jsì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ exportsë¡œ ë¹¼ì£¼ê¸°
module.exports = router;
```

```javascript
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>í…ŒìŠ¤íŠ¸</title>

<body>
    <form action="/routes/is_odd_2" method="get">
        ìˆ«ì : <input type="text" name="number" /><br />
        <input type="submit" />
    </form>
</body>

</html>
```

- ì…ë ¥í•˜ë©´ ì´ë ‡ê²Œ ì£¼ì†Œê°€ ì´ë™ëœë‹¤. â‡’ [`http://localhost:9999/routes/is_odd_2?number=10`](http://localhost:9999/routes/is_odd_2?number=10)
- ë§¤ê°œë³€ìˆ˜ : ì„œë²„ì— ìš”ì²­í•˜ëŠ” ì¶”ê°€ì ì¸ ë°ì´í„°ë¡œ, í‚¤ì™€ ê°’ìœ¼ë¡œ êµ¬ë¶„ë¨
- ë§¤ê°œë³€ìˆ˜ê°€ 2ê°œ ì´ìƒì´ ë„˜ì–´ì˜¤ë©´ `&`ë¡œ êµ¬ë¶„í•œë‹¤.

## ğŸ“ .env

- í™˜ê²½ë³€ìˆ˜ íŒŒì¼
- `npm i dotenv `ë¡œ ì„¤ì¹˜
- `const dotenv = require("dotenv");`
- `dotenv.config();`

```javascript
const express = require("express");
const dotenv = require("dotenv"); // env

const index = require("./routes/index");

const app = express();
dotenv.config(); // env

// app.set -> í™˜ê²½ì„¤ì •ì„ ì €ì¥í•  ìˆ˜ ìˆìŒ.
// app.set("ì´ë¦„", ê°’)
// process -> Node.js ë‚´ì¥ ê°ì²´
// dotenv -> process.envì— .env íŒŒì¼ì— ìˆëŠ” ê°’ì„ ë‹¤ ë„£ìŒ.
// .env íŒŒì¼ ì—†ìŒ -> ? process.env.PORT => undefined
// .env íŒŒì¼ì´ ìˆìœ¼ë©´ ê±°ê¸°ì— ìˆëŠ” PORTë¥¼ ì“°ê³ , ì—†ìœ¼ë©´ 9999ë¡œ í•¨.
app.set("port", process.env.PORT || 9999);
app.use("/routes/", index);

app.listen(app.get("port"), () => {
  console.log(`${app.get("port")}ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ê°€ ëŒì•„ê°€ê³  ìˆì–´ìš”!`);
});
```

- ì´ë ‡ê²Œ envíŒŒì¼ë¡œ ë”°ë¡œ ê´€ë¦¬í•˜ì§€ë§Œ ê²°êµ­ì—” env íŒŒì¼ì„ ìˆ˜ì •í•˜ë©´ ë¬¸ì œ ë°˜ë³µ ì•„ë‹Œê°€ìš”?!
  - `gitignore`ì„ ì‚¬ìš©í•˜ì. í¬íŠ¸ë²ˆí˜¸ëŠ” ê°ì ì•Œì•„ì„œ ì“°ê³  envíŒŒì¼ë§Œ gitignore í•´ì¤˜ì„œ ì»¤ë°‹í•˜ì.
- [gitignore.io](https://www.toptal.com/developers/gitignore) : í”„ë¡œì íŠ¸ì—ì„œ ì‚¬ìš©í•˜ëŠ” í™˜ê²½ì— ë§ê²Œ gitignoreì„ ìë™ìœ¼ë¡œ ìƒì„±í•´ì¤€ë‹¤.

## ğŸ“ ë¯¸ë“¤ì›¨ì–´

- router.get.ì€ ëª©ì ì§€ì™€ í•¨ìˆ˜ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤.
- **ë¯¸ë“¤ì›¨ì–´ë€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ìš”ì²­ì„ ë°›ì•„ ê·¸ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” ê³¼ì •ì—ì„œ ê±°ì¹˜ëŠ” ëª¨ë“  í•¨ìˆ˜ë“¤ì´ë‹¤.**
- express.jsì—ì„œëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ **ìˆœì°¨ì ìœ¼ë¡œ** ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.
- **ì¦‰, ìš”ì²­ê³¼ ì‘ë‹µ ì‚¬ì´ì—ì„œ ì¶”ê°€ì ì¸ êµ¬í˜„ì„ í•´ì£¼ëŠ” ê²ƒì´ ë¯¸ë“¤ì›¨ì–´ì´ë‹¤.**

```javascript
router.use(func1);
router.get("/", (req, res) => {
  res.send("/");
});

router.get("/test", (req, res, next) => {
  res.send("/test");
  next();
});

router.use(func2);
```

- `next()`ë€ ë‹¤ìŒìœ¼ë¡œ ë„˜ê¸´ë‹¤ëŠ” ë§ì´ë‹¤. â‡’ê·¸ë˜ì„œ ë‹¤ìŒì— ë­”ë°?! â‡’ nextê°€ ìˆìœ¼ë©´ ë‹¤ìŒê¹Œì§€ ì˜¤ì¼€ì´, ì—†ìœ¼ë©´ ì—¬ê¸°ì„œ ë!

### ğŸ“• ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ëŠ” ì´ìœ ?

- ê·¸ëƒ¥ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë°–ì—ì„œ ë¹¼ì„œ ë”°ë¡œ ì“°ëŠ” ì´ìœ ëŠ”? ê·¸ëƒ¥ router.get()ìœ¼ë¡œ ì‚¬ìš©í•´ë„ ë˜ì§€ ì•Šë‚˜ìš”? â‡’ ì•„ë‹ˆë‹¤. ë¯¸ë“¤ì›¨ì–´ë¥¼ ìœ ìš©í•œ ìƒí™©ì´ ìˆë‹¤. â‡’ ì—­í• ì˜ êµ¬ë¶„!!!!
- ì˜ˆë¥¼ ë“¤ë©´ ì‡¼í•‘ëª°ì— ë‚´ ì£¼ë¬¸ ì„ ë¬¼í•¨ ë“± ë³´ë ¤ë©´ ì¼ë‹¨ ë¡œê·¸ì¸ì„ í•´ì•¼ ë˜ë‹ˆê¹Œ ë¡œê·¸ì¸ì´ë¼ëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ë§Œë“¤ê³  ê·¸ ì•„ë˜ì— ë¼ìš°í„°ë“¤ì„ êµ¬í˜„í•˜ë©´ í•œë²ˆ ë¡œê·¸ì¸ë˜ë©´ ê·¸ ì•„ë˜ ë¼ìš°í„°ë“¤ì´ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆë‹¤. â‡’ ì´ëŸ° ëª©ì ìœ¼ë¡œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•œë‹¤.

## ğŸ“ ë¯¸ë“¤ì›¨ì–´ ì˜ˆì œ

### ğŸ›  app.js

```javascript
const express = require("express");
const dotenv = require("dotenv"); // env

// reoutesì— ìˆëŠ” index.js ê°€ì ¸ì˜¤ê¸°
const index = require("./routes/index");

// ë¯¸ë“¤ì›¨ì–´ ì—°ê²°
const middleware_test = require("./routes/middleware_test");

const rest_api = require("./routes/rest_api_practice");
const kakao = require("./routes/kakao");

const app = express();
dotenv.config(); // env

// app.set -> í™˜ê²½ì„¤ì •ì„ ì €ì¥í•  ìˆ˜ ìˆìŒ.
// app.set("ì´ë¦„", ê°’)
// process -> Node.js ë‚´ì¥ ê°ì²´
// dotenv -> process.envì— .env íŒŒì¼ì— ìˆëŠ” ê°’ì„ ë‹¤ ë„£ìŒ.
// .env íŒŒì¼ ì—†ìœ¼ë©´? -> process.env.PORT => undefined
// .env íŒŒì¼ì´ ìˆìœ¼ë©´ ê±°ê¸°ì— ìˆëŠ” PORTë¥¼ ì“°ê³ , ì—†ìœ¼ë©´ 9999ë¡œ í•¨. => process.env.PORT || 9999
app.set("port", process.env.PORT || 9999);
app.use("/routes/", index);
app.use("/middleware", middleware_test);
app.use("/restapi", rest_api);
app.use("/kakao", kakao);

app.listen(app.get("port"), () => {
  console.log(`${app.get("port")}ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ê°€ ëŒì•„ê°€ê³  ìˆì–´ìš”!`);
});
```

### ğŸ›  /routes/middleware_test.js

```javascript
const express = require("express");
const router = express.Router();

const func1 = (req, res, next) => {
  console.log("ë¬´ì¡°ê±´ ê±°ì³ê°€ì•¼ í•´ìš”!");
  next(); // 2. ì™”ë”ë‹ˆ nextê°€ ìˆì–´ì„œ ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ê°€ ì‹¤í–‰ ë˜ì–´ì•¼ í•œë‹¤.
};

const func2 = (req, res) => {
  console.log("ì´ê±´ ëœ°ê¹Œìš”?"); // 5. ì¶œë ¥
};

// useëŠ” ì—¬ê¸°ì— ë„ë‹¬í•˜ë©´ í•´ë‹¹ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‹¤í–‰í•œë‹¤!!
router.use(func1); // 1. ì—¬ê¸°ë¥¼ ë¨¼ì € ë„ì°©, ì¡°ê±´ ì—†ì´ ì‹¤í–‰

// í•´ë‹¹ ì¡°ê±´ì„ ì¶©ì¡±í•˜ë©´ ì‹¤í–‰
router.get("/", (req, res) => {
  res.send("/"); // 3. ì¡°ê±´ì„ ì¶©ì¡±í•´ì„œ ì½”ë“œê°€ ì‹¤í–‰ë˜ê³  ê·¸ í›„ nextê°€ ì—†ì–´ì„œ ì—¬ê¸°ì„œ ì¢…ë£Œ
});

// í•´ë‹¹ ì¡°ê±´ì„ ì¶©ì¡±í•˜ë©´ ì‹¤í–‰
router.get("/test", (req, res, next) => {
  res.send("/test");
  next(); // 3. ì¡°ê±´ì„ ì¶©ì¡±í•´ì„œ ì½”ë“œê°€ ì‹¤í–‰ë˜ê³  ë‹¤ìŒ ë¯¸ë“¤ì›¨ì–´ê°€ ì‹¤í–‰ ë˜ì–´ì•¼ í•œë‹¤.
});

// useëŠ” ì—¬ê¸°ì— ë„ë‹¬í•˜ë©´ í•´ë‹¹ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‹¤í–‰í•œë‹¤!!
router.use(func2); // 4. /middleware/testë¡œ ë“¤ì–´ì˜¤ë©´ ìœ„ nextê°€ ì‹¤í–‰ë˜ì–´ì„œ ì‹¤í–‰

module.exports = router;
```

### ğŸ›  /routes/index.js

```javascript
const express = require("express");
const path = require("path");

// ** routerë¡œ ìƒì„±
const router = express.Router();

// appì´ ì•„ë‹Œ router
router.get("/", (req, res) => {
  res.send("ì•ˆë…•!");
});

// ë™ì ìœ¼ë¡œ ê°’ ë„£ì–´ì£¼ê¸°
router.get("/is_odd_1/:id", (req, res) => {
  const id = parseInt(req.params.id);

  if (isNaN(id)) res.send("ì•„ ìˆ«ìë§Œ ë„£ìœ¼ë¼ê³  --;;");
  else if (id % 2 === 0) res.send(`${id}ëŠ” ì§ìˆ˜ì—ìš”!`);
  else res.send(`${id}ëŠ” í™€ìˆ˜ì—ìš”!`);
});

router.get("/is_odd_2_page", (req, res) => {
  res.sendFile(path.join(__dirname, "../static/get_test.html"));
});

router.get("/is_odd_2", (req, res) => {
  // paramsê°€ queryë¡œ ë°”ë€œ
  // numberëŠ” formíƒœê·¸ ì•ˆì— ìˆëŠ” nameê°’ì´ number, query stringëŠ” form íƒœê·¸ë¡œ ë³´ë‚¸ ë°ì´í„°ë¥¼ ìë™ìœ¼ë¡œ ë°›ì•„ì˜´
  const id = parseInt(req.query.number);

  // http://localhost:9999/routes/is_odd_2?number=23 ì´ë ‡ê²Œ ì£¼ì†Œ ì „ë‹¬ ëœë‹¤.
  if (isNaN(id)) res.send("ì•„ ìˆ«ìë§Œ ë„£ìœ¼ë¼ê³  --;;");
  else if (id % 2 === 0) res.send(`${id}ëŠ” ì§ìˆ˜ì—ìš”!`);
  else res.send(`${id}ëŠ” í™€ìˆ˜ì—ìš”!`);
});

// ë‹¤ë¥¸ íŒŒì¼ì—ì„œ index.jsì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ exportsë¡œ ë¹¼ì£¼ê¸°
module.exports = router;
```

## ğŸ“ API

- ì‘ìš© í”„ë¡œê·¸ë¨ í”„ë¡œê·¸ë˜ë° ì¸í„°í˜ì´ìŠ¤
  - ì¸í„°í˜ì´ìŠ¤ê°€ ë­ëƒ? ì‚¬ìš©ìê°€ ê¸°ê¸°. í”„ë¡œê·¸ë¨ì„ ì‰½ê²Œ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•´ ë„ì›€ì„ ì£¼ëŠ” ê²ƒ
- í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ ë•Œ ë„ì›€ì„ ì£¼ëŠ” something
- **ì¦‰, ë‚´ë¶€ ë™ì‘ ê³¼ì •ì„ ëª°ë¼ë„ apië¥¼ í†µí•´ ì‘ìš© í”„ë¡œê·¸ë¨ ê°œë°œì´ ê°€ëŠ¥í•˜ë‹¤.**

## ğŸ“REST APIë€?

- APIì§€ë§Œ, ì›¹ì„ í†µí•´ ì›í•˜ëŠ” ìš”ì²­ì„ ë³´ë‚´ê³ , ê·¸ ìš”ì²­ì„ ë°›ëŠ” ê²ƒ!
- ì‹¤ì œ í´ë¼ì´ì–¸íŠ¸ëŠ” urlë¡œ ë¦¬í€˜ìŠ¤íŠ¸ ìš”ì²­ì„ ë³´ë‚¸ë‹¤.
- ê·¸ëŸ¬ë©´ ì„œë²„ëŠ” http ìƒíƒœ ì½”ë“œì™€ í•¨ê»˜ ê²°ê´ê°’ì„ ë³´ë‚¸ë‹¤.
- http ì½”ë“œë¥¼ ì²´í¬í•˜ê³  ì ì ˆí•œ ë°ì´í„° ê°€ê³µì„ ì²˜ë¦¬í•œë‹¤.

- [HTTP Cats](https://http.cat/)

### ğŸ“• GET - ì½ì„ ë•Œ ì‚¬ìš©

- ì£¼ë¡œ ë°ì´í„°ë¥¼ ì½ê±°ë‚˜, ê²€ìƒ‰í•  ë•Œ ì‚¬ìš©í•˜ëŠ” ë©”ì„œë“œ
- httpëª…ì„¸ì— ì˜í•˜ë©´ getìš”ì²­ì€ ë°ì´í„°ë¥¼ ì½ì„ ë•Œë§Œ ì‚¬ìš©ë˜ì–´ì•¼ ë˜ê³  ìˆ˜ì •ë  ë•ŒëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì•„ì•¼ í•œë‹¤.

### ğŸ“• POST - ìƒì„±í•  ë•Œ ì‚¬ìš©

- ì£¼ë¡œ ìƒˆë¡œìš´ ë¦¬ì†ŒìŠ¤ë¥¼ ìƒì„±í•  ë•Œ ì‚¬ìš©ëœë‹¤. (ì„±ê³µ ì‹œ 201 return)
- ì¼ë°˜ì ìœ¼ë¡œ getì€ ìœ ì•Œì—˜ì— ëª¨ë“  ì •ë³´ë¥¼ ë‹´ëŠ”ë° ë¹„í•´, POSTëŠ” HTML Bodyë‚˜ JSONìœ¼ë¡œ ì „ë‹¬í•œë‹¤.

### ğŸ“• JSON

- ì¼ë°˜ì ìœ¼ë¡œ ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ë¡œ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹
- ê¸°ì¡´ì— ì‚¬ìš©í–ˆë˜ xmlë°©ì‹ì— ì˜í•´ ë” ì‚¬ìš©í•˜ê¸° ì‰¬ì›Œ ë„ë¦¬ ì‚¬ìš©ë¨

### ğŸ“REST API ì‚¬ìš© ì˜ˆì œ

### ğŸ›  app.js

```javascript
const express = require("express");
const dotenv = require("dotenv"); // env

// reoutesì— ìˆëŠ” index.js ê°€ì ¸ì˜¤ê¸°
const index = require("./routes/index");

// ë¯¸ë“¤ì›¨ì–´ ì—°ê²°
const middleware_test = require("./routes/middleware_test");

const rest_api = require("./routes/rest_api_practice");
const kakao = require("./routes/kakao");

const app = express();
dotenv.config(); // env

// app.set -> í™˜ê²½ì„¤ì •ì„ ì €ì¥í•  ìˆ˜ ìˆìŒ.
// app.set("ì´ë¦„", ê°’)
// process -> Node.js ë‚´ì¥ ê°ì²´
// dotenv -> process.envì— .env íŒŒì¼ì— ìˆëŠ” ê°’ì„ ë‹¤ ë„£ìŒ.
// .env íŒŒì¼ ì—†ìœ¼ë©´? -> process.env.PORT => undefined
// .env íŒŒì¼ì´ ìˆìœ¼ë©´ ê±°ê¸°ì— ìˆëŠ” PORTë¥¼ ì“°ê³ , ì—†ìœ¼ë©´ 9999ë¡œ í•¨. => process.env.PORT || 9999
app.set("port", process.env.PORT || 9999);
app.use("/routes/", index);
app.use("/middleware", middleware_test);
app.use("/restapi", rest_api);
app.use("/kakao", kakao);

app.listen(app.get("port"), () => {
  console.log(`${app.get("port")}ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ê°€ ëŒì•„ê°€ê³  ìˆì–´ìš”!`);
});
```

### ğŸ›  /routes/rest_api_practice.js

```javascript
const express = require("express");
const router = express.Router();

// ì‚¬ìš©ë²• ì°¾ì•„ë³´ê¸° express.json() ì´ê²Œ ë­”ì§€
router.use(express.json()); // ì´ í˜ì´ì§€ì— ë“¤ì–´ê°€ ìˆëŠ” ë‚´ìš©ë“¤ì€ json í˜•ì‹ìœ¼ë¡œ í†µì‹ í•  ìˆ˜ ìˆë‹¤.

const users = [
  { id: 1, username: "kim" },
  { id: 2, username: "lee" },
  { id: 3, username: "park" },
];

router.get("/", (req, res) => {
  res.json(users); // sendê°€ ì•„ë‹Œ json!
});

/*
const data = {
  id: 123,
  username: "jam"
};


-> username êº¼ë‚¼ ë•Œ => data.username
*/

// ì£¼ì†Œê°€ ë˜‘ê°™ì•„ë„ get postê°€ ë‹¤ë¥´ë©´ ë‹¤ë¥´ê²Œ ì¸ì‹í•œë‹¤.
router.post("/", (req, res) => {
  //í´ë¼ì´ì–¸íŠ¸ ì¸¡ì—ì„œ ìš”ì²­ì„ ë³´ëƒ„
  //ìš”ì²­ì„ ê¹Œë´ì•¼ê² ë‹¤!

  // ì¼ë°˜ì ìœ¼ë¡œ idëŠ” ì„œë¡œ ë‹¤ë¥´ê²Œ í•˜ëŠ”ê²Œ ì¢‹ë‹¤. => ì‹œê°„ì„ ë„£ì–´ì¤€ë‹¤. => nodejsëŠ” ì‹±ê¸€ì“°ë ˆë“œë¼ì„œ ë™ì‹œì— ìš”ì²­ì„ ì²˜ë¦¬í•  ìˆ˜ ì—†ì–´ì„œ ê°™ì€ ì‹œê°„ì´ ë‚˜ì˜¬ ìˆ˜ ì—†ë‹¤.

  // ë§Œì•½ì— ì´ë¯¸ ë˜‘ê°™ì€ ìœ ì €ê°€ ìˆë‹¤ê±°ë‚˜, ê¶Œí•œì´ ì—†ë‹¤ê±°ë‚˜, usernameì´ ì—†ê±°ë‚˜ì— ëŒ€í•´ì„œ ì—ëŸ¬ ì½”ë“œë¥¼ ë„£ì–´ë³´ì!
  // try catchë¥¼ ì‚¬ìš©í•˜ì
  try {
    const req_data = req.body; // ìë°”ìŠ¤í¬ë¦½íŠ¸ ê°ì²´ë¥¼ ë“¤ê³  ì™”ë‹¤.

    if (!req_data.username) {
      return res.status(400).end(); // usernameì´ ì˜¬ë°”ë¥´ì§€ ì•Šìœ¼ë©´ ìƒíƒœì½”ë“œë¥¼ 400ìœ¼ë¡œ ì„¤ì •í•˜ê³  end!
    }

    const user_data = {
      id: Date.now(),
      username: req_data.username,
    };

    users.push(user_data);
    res.json(user_data); // ìš”ì²­ì´ ìˆë‹¤ë©´ í•­ìƒ ì‘ë‹µì´ ìˆì–´ì•¼ í•œë‹¤. ë°ì´í„°ê°€ ì˜ ë“¤ì–´ê°”ëŠ”ì§€ í™•ì¸í•˜ê¸°, ë°˜í™˜ê°’ ë„£ì–´ì£¼ê¸°
  } catch (err) {
    console.log(err);
    return res.status(500).end();
  }
});

module.exports = router;
```

## ğŸ“ KAKAO API ì‚¬ìš©í•´ë³´ê¸°

### ğŸ›  app.js

```javascript
const express = require("express");
const dotenv = require("dotenv"); // env

// reoutesì— ìˆëŠ” index.js ê°€ì ¸ì˜¤ê¸°
const index = require("./routes/index");

// ë¯¸ë“¤ì›¨ì–´ ì—°ê²°
const middleware_test = require("./routes/middleware_test");

const rest_api = require("./routes/rest_api_practice");
const kakao = require("./routes/kakao");

const app = express();
dotenv.config(); // env

// app.set -> í™˜ê²½ì„¤ì •ì„ ì €ì¥í•  ìˆ˜ ìˆìŒ.
// app.set("ì´ë¦„", ê°’)
// process -> Node.js ë‚´ì¥ ê°ì²´
// dotenv -> process.envì— .env íŒŒì¼ì— ìˆëŠ” ê°’ì„ ë‹¤ ë„£ìŒ.
// .env íŒŒì¼ ì—†ìœ¼ë©´? -> process.env.PORT => undefined
// .env íŒŒì¼ì´ ìˆìœ¼ë©´ ê±°ê¸°ì— ìˆëŠ” PORTë¥¼ ì“°ê³ , ì—†ìœ¼ë©´ 9999ë¡œ í•¨. => process.env.PORT || 9999
app.set("port", process.env.PORT || 9999);
app.use("/routes/", index);
app.use("/middleware", middleware_test);
app.use("/restapi", rest_api);
app.use("/kakao", kakao);

app.listen(app.get("port"), () => {
  console.log(`${app.get("port")}ë²ˆ í¬íŠ¸ì—ì„œ ì„œë²„ê°€ ëŒì•„ê°€ê³  ìˆì–´ìš”!`);
});
```

### ğŸ›  /routeskakao.js

```javascript
const express = require("express");
const axios = require("axios");

const router = express.Router();
// dotenvë¥¼ ë§í¬ ì•ˆ í•´ë„ ë˜ëŠ” ì´ìœ ëŠ”? app.jsì—ì„œ ì½”ë“œê°€ í•©ì³ì§€ë©´ì„œ kakao,jsì—ì„œë„ dotenvë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
router.get("/search", (req, res) => {
  const search = req.query.search;

  axios
    .get("https://dapi.kakao.com/v2/search/web", {
      headers: {
        Authorization: `KakaoAK ${process.env.KAKAO_REST_API_KEY}`,
      },
      params: {
        query: search,
      },
    })
    .then((result) => {
      const titles = [];
      for (let idx in result.data.documents) {
        titles.push(result.data.documents[idx].title);
      }
      res.json(titles);
    })
    .catch((err) => console.log(err));
});

module.exports = router;
```

## ğŸ’¡ ì˜¤ëŠ˜ ê¹¨ë‹¬ì€ ê²ƒ

- ë¼ìš°í„°ëŠ” ì—­í• ì˜ êµ¬ë¶„ì´ë‹¤.
- api ì„œë²„ë¥¼ ë§Œë“¤ë©´ api ëª…ì„¸ì„œë¥¼ ë§Œë“¤ì–´ì•¼ í•œë‹¤. ê·¸ë˜ì•¼ ë°±ì´ë‘ í”„ë¡ íŠ¸ë‘ ì†Œí†µì´ ê°€ëŠ¥í•˜ë‹¤.
- í”„ë¡œì íŠ¸ ì‹œì‘ ì‹œ ì œì¼ ë¨¼ì € í•´ì•¼ ë  ê±°ëŠ” api ê·œì•½ í™•ì •. â‡’ Swagger

## ğŸ“Œ ì°¸ê³ 

- [Semantic Versioning](https://devopedia.org/semantic-versioning)
- [ìœ ì˜ì  ë²„ì „ 2.0.0](https://semver.org/lang/ko/)
- [Semantic Versioning ì†Œê°œ](https://spoqa.github.io/2012/12/18/semantic-versioning.html)
