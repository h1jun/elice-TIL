# ğŸ“– ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© - 2021.12.03

- Middleware
- REST API
- JSON
- MVC íŒ¨í„´
- Postman ì‚¬ìš©í•˜ê¸°
- exportsì™€ module.exportsì˜ ì°¨ì´
- Router ì‚¬ìš©í•˜ê¸°
- ë¯¸ë“¤ì›¨ì–´ body-parser ì‚¬ìš©í•˜ê¸°

## ğŸ“ Middlewareë€?

- [[Node.js] Node.js Middlewareë€?](https://lakelouise.tistory.com/211)

## ğŸ“ REST API

- [[Node.js] Node.js REST APIë€?](https://lakelouise.tistory.com/212)

## ğŸ“ JSON

- JavaScript Object Notation
- ìë°”ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ê°ì²´ë¥¼ í‘œí˜„í•˜ëŠ” í‘œí˜„ì‹ìœ¼ë¡œ ì‹œì‘ë˜ì—ˆë‹¤.
- ë°ì´í„°ë¥¼ í‘œí˜„í•˜ëŠ” ë°©ë²•ì´ ë‹¨ìˆœí•˜ê³  ì´í•´í•˜ê¸° ì‰¬ì›Œì„œ ì›¹ APIì—ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•  ë•Œ í‘œí˜„ì‹ìœ¼ë¡œ ì£¼ë¡œ ì‚¬ìš©ë¨
- ì›¹ APIëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ **ë¬¸ìì—´ë¡œ ì „ì†¡**í•˜ê²Œ ëœë‹¤.
- ì–´ë–¤ **ê°ì²´ë¥¼ ì›¹ APIë¥¼ í†µí•´ì„œ ë¬¸ìì—´ë¡œ ì „ë‹¬í•˜ê¸° ìœ„í•´ JSONì„ ì‚¬ìš©**í•œë‹¤.
- JSONì—ì„œ ObjectëŠ” { key: value }ë¡œ í‘œí˜„í•œë‹¤.
  - valueì—ëŠ” ì–´ë–¤ ê°’ì´ë¼ë„ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤ (ë¬¸ìì—´, ìˆ«ì, JSON ê°ì²´ ë“±)
  - Ex) { name: 'elice', age: 5, nationality: 'korea' }
- JSONì—ì„œ ArrayëŠ” [item1, item2]ë¡œ í‘œí˜„í•œë‹¤.
  - itemì—ëŠ” ì–´ë–¤ ê°’ì´ë¼ë„ ì‚¬ìš©ë  ìˆ˜ ìˆë‹¤ (ë¬¸ìì—´, ìˆ«ì, JSON ê°ì²´ ë“±)
  - Ex) ['first', 10, { name: 'bob' }]

## ğŸ“ MVC íŒ¨í„´

- MVC íŒ¨í„´ì€ ì›¹ ì„œë¹„ìŠ¤ì˜ ê°€ì¥ ëŒ€í‘œì ì¸ í”„ë¡œì íŠ¸ êµ¬ì„± íŒ¨í„´ìœ¼ë¡œ í”„ë¡œì íŠ¸ì˜ ê¸°ëŠ¥ë“¤ì„ ì–´ë–»ê²Œ ë¶„ë¦¬í• ì§€ì— ëŒ€í•œ í•˜ë‚˜ì˜ êµ¬ì„± ë°©ë²•ì´ë‹¤.
- Model - View - Controllerë¥¼ êµ¬ë¶„í•˜ì—¬ í”„ë¡œì íŠ¸ êµ¬ì¡°ë¥¼ êµ¬ì„±í•œë‹¤.

### ğŸ“• Model

- ë°ì´í„°ì— ì ‘ê·¼í•˜ëŠ” ê¸°ëŠ¥ ë˜ëŠ” ë°ì´í„° ê·¸ ìì²´ë¥¼ ì˜ë¯¸
- ë°ì´í„°ì˜ ì½ê¸°, ì“°ê¸°ëŠ” Modelì„ í†µí•´ì„œë§Œ ì´ë£¨ì–´ì§€ë„ë¡ êµ¬ì„±

### ğŸ“• View

- ë°ì´í„°ë¥¼ í‘œí˜„í•˜ëŠ” ê¸°ëŠ¥ ì£¼ë¡œ Controllerì— ì˜í•´ ë°ì´í„°ë¥¼ ì „ë‹¬ë°›ê³  ì „ë‹¬ë°›ì€ ë°ì´í„°ë¥¼ í™”ë©´ì— í‘œì‹œí•´ ì£¼ëŠ” ê¸°ëŠ¥ì„ ë‹´ë‹¹

### ğŸ“• Controller

- Modelì„ í†µí•´ ë°ì´í„°ì— ì ‘ê·¼í•˜ì—¬, ì²˜ë¦¬ ê²°ê³¼ë¥¼ Viewë¡œ ì „ë‹¬í•˜ëŠ” ê¸°ëŠ¥
- ì›¹ ì„œë¹„ìŠ¤ì—ì„  ì£¼ë¡œ ë¼ìš°íŒ… í•¨ìˆ˜ê°€ í•´ë‹¹ ê¸°ëŠ¥ì„ ìˆ˜í–‰

## ğŸ“ exportsì™€ module.exportsì˜ ì°¨ì´

### ğŸ“• module.exports

```javascript
module.exports = {
  area: function (width) {
    return width * width;
  },

  perimeter: function (width) {
    return 4 * width;
  },
};
```

- module.exportsëŠ” require() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ ë°˜í™˜ë°›ëŠ” ë³€ìˆ˜ì´ë©° ë¹„ì–´ ìˆëŠ” ê°ì²´ê°€ ê¸°ë³¸ê°’ì´ë©° ì–´ë–¤ ê²ƒìœ¼ë¡œë„ ììœ ë¡­ê²Œ ë³€ê²½í•  ìˆ˜ ìˆë‹¤.
- ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” ë°©ë²•ì´ë‹¤.

### ğŸ“• exports

```javascript
exports.area = function (width) {
  return width * width;
};
exports.perimeter = function (width) {
  return 4 * width;
};
```

```javascript
var square = require("./square"); // Here we require() the name of the file without the (optional) .js file extension
console.log("The area of a square with a width of 4 is " + square.area(4));
```

- exportsë¥¼ ì‚¬ìš©í•˜ë©´ ëª¨ë“ˆì„ ì‘ì„±í•  ë•Œ ë” ì ì€ ì–‘ì˜ ì½”ë“œë¡œ ì‘ì„±í•  ìˆ˜ ìˆìœ¼ë©° ì´ ë³€ìˆ˜ì˜ í”„ë¡œí¼í‹°ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ë„ ì•ˆì „í•˜ê³  ì¶”ì²œí•˜ëŠ” ë°©ë²•ì´ë‹¤.
- ì´ ë‘ ê°€ì§€ ë°©ë²•ì˜ ê°€ì¥ í° ì°¨ì´ëŠ” **exportsë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” exports ê°ì²´ì— í”„ë¡œí¼í‹°ë¥¼ ì¶”ê°€í•˜ê³ **, module.exportsë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” **module.exports ë³€ìˆ˜ì— ì•„ì˜ˆ ìƒˆë¡œìš´ ê°ì²´ë¥¼ í• ë‹¹í•˜ëŠ” ê²ƒ**ì´ë‹¤.

## ğŸ“ Router ì‚¬ìš©í•˜ê¸°

- ë¼ìš°íŒ…ì€ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ë³´ë‚´ëŠ” ì£¼ì†Œì— ë”°ë¼ ê²½ë¡œë¥¼ ì„¤ì •í•´ ì£¼ëŠ” ê²ƒì„ ì˜ë¯¸í•œë‹¤.
- ë³´í†µ ì›¹í˜ì´ì§€ì—ì„œ urlì— ë”°ë¥¸ ì²˜ë¦¬ë¥¼ í•´ì£¼ëŠ” ê²ƒ

```javascript
app.get("/", function (req, res) {
  res.send("root");
});

//-------------------------------------
const express = require("express");

const app = express();
const userRouter = require("./routes/users");

app.get("/", (req, res) => {
  res.send("OK");
});

/* ë¼ìš°í„°ë¥¼ '/users' ê²½ë¡œì— ì—°ê²° */
app.use("/users", userRouter);

app.listen(8080);
```

## ğŸ“ ë¯¸ë“¤ì›¨ì–´ body-parser ì‚¬ìš©í•˜ê¸°

```bash
npm install body-parser
```

- ë¯¸ë“¤ì›¨ì–´ ì¤‘ í•˜ë‚˜ì¸ body-parserë¥¼ ì‚¬ìš©í•˜ë©´ ì—¬ëŸ¬ ê°€ì§€ ë°œìƒ ê°€ëŠ¥í•œ ë¬¸ì œë“¤ì„ ë°©ì§€í•˜ê³  ìš”ì²­ì˜ ë³¸ë¬¸(body)ì„ ì§€ì •í•œ í˜•íƒœë¡œ parsing í•´ì¤€ë‹¤.
- Express í”„ë ˆì„ì›Œí¬ëŠ” ìš”ì²­ì„ ì²˜ë¦¬í•  ë•Œ ê¸°ë³¸ì ìœ¼ë¡œ bodyë¥¼ undefinedë¡œ ì²˜ë¦¬í•˜ê³  ìˆê¸° ë•Œë¬¸ì— ì•„ë˜ ì½”ë“œì²˜ëŸ¼ req.bodyë¥¼ ì½˜ì†”ì— ì¶œë ¥í•˜ë©´ undefinedê°€ ì¶œë ¥ëœë‹¤.

```javascript
app.get("/test", (req, res) => {
  res.send("test");
  console.log(req.body); // undefined
});
```

- body-parser ë¯¸ë“¤ì›¨ì–´ë¥¼ ì‚¬ìš©í•˜ë©´ requestì˜ body ë¶€ë¶„ì„ json í˜•íƒœë¡œ íŒŒì‹±í•˜ì—¬ í™œìš©í•  ìˆ˜ ìˆë‹¤.

```javascript
//body-parser ëª¨ë“ˆ ë¶ˆëŸ¬ì˜¤ê¸°
const bodyParser = require("body-parser");

app.use(bodyParser.json()); //ìš”ì²­ ë³¸ë¬¸ì„ json í˜•íƒœë¡œ íŒŒì‹±
app.use(bodyParser.urlencoded({ extended: false })); //
```

## ğŸ’¡ ì˜¤ëŠ˜ ê¹¨ë‹¬ì€ ê²ƒ

- Node.jsëŠ” ì²˜ìŒ ê³µë¶€í•˜ë‹¤ ë³´ë‹ˆ êµ¬ì¡°ê°€ ì»¤ì§€ëŠ” ìˆœê°„ ì–´ë µê²Œ ëŠê»´ì§„ë‹¤.
- CRUD ì™œ ì´ë ‡ê²Œ ë³µì¡í•œì§€ ëª¨ë¥´ê² ë‹¤. ì£¼ë§ì— ì˜ìƒ ë‹¤ì‹œ ë³´ë©´ì„œ ìµìˆ™í•´ë³´ì!!!

## ğŸ“Œ ì°¸ê³ 

- [Express/Node ì†Œê°œ - Web ê°œë°œ í•™ìŠµí•˜ê¸° | MDN](https://developer.mozilla.org/ko/docs/Learn/Server-side/Express_Nodejs/Introduction)
- [Node.jsì—ì„œ exportsì™€ mudule.exportsì˜ ì°¨ì´](http://happinessoncode.com/2018/05/20/nodejs-exports-and-module-exports/)
- [[Javascript] module.exports vs exports](https://velog.io/@jch9537/Javascript-module)
