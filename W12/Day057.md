# ğŸ“– ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© - 2022.01.11

- Redux

## ğŸ“ Redux

- ë…ë¦½ì ì¸ ë¼ì´ë¸ŒëŸ¬ë¦¬
- ë¦¬ì•¡íŠ¸ì™€ ë…ë¦½ì ì´ë‹¤.
- ë¦¬ë•ìŠ¤ì—ì„œëŠ” ë‹¨ í•˜ë‚˜ì˜ ê°ì²´ì— ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ë°ì´í„°ë¥¼ ìš±ì—¬ë„£ëŠ”ë‹¤.
- í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ìƒíƒœë¥¼ ë°”ê¾¸ê³  ì‚¬ìš©í•œë‹¤.
- ì˜ˆì¸¡ ê°€ëŠ¥í•œ!!!

## ğŸ“ ë¦¬ë•ìŠ¤ ìš©ì–´ ì •ë¦¬

- store : stateê°€ ì €ì¥ë˜ëŠ” ê³³
  - ì§ì ‘ ì ‘ê·¼í•˜ë©´ ì•ˆ ëœë‹¤.
- dispatch: ìƒíƒœê°€ ì–´ë–»ê²Œ ë°”ë€” ê±´ê°€ë¥¼ ì •ì˜í•˜ëŠ” í•¨ìˆ˜ === ìƒíƒœ ë³€ê²½
- getState: state ì „ì²´ë¥¼ ê°€ì ¸ì˜¨ë‹¤
- subscribe: ìƒíƒœê°€ ë³€ê²½ë˜ì—ˆìŒì„ renderì—ê²Œ ì•Œë ¤ì£¼ëŠ” í•¨ìˆ˜
- reducer : ê³¼ê±°ì˜ ìƒíƒœì™€ ì•¡ì…˜ì„ ë°›ì•„ì„œ ìƒˆë¡œìš´ ìƒíƒœë¥¼ ìˆ˜ì •í•˜ëŠ” ë‹´ë‹¹ì
- ì •ë¦¬
  - action-dispatch-reducer-stateë³€ê²½-subscribeê°€ ë“±ë¡ë˜ì–´ ìˆëŠ” render í˜¸ì¶œ-render-getState-stateê°€ì ¸ì˜¤ê¸°-getState-renderë¡œ UI ë§Œë“¤ê¸°

## ğŸ“ ë¦¬ë•ìŠ¤ ì˜ˆì œ

```jsx
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Redux</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/5.0.0-alpha.0/redux.min.js" integrity="sha512-6WJ7yVV5HDZwZ0RT5CM3FCTgTt5qC5BlfQ9bG43y0BowT5a3GXQqDYaoZgCk+i9vuB1Yj6KdBPQAU8Ra7tV32w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
    <style>
        .container{
            border:5px solid black;
            padding:10px;
        }
    </style>
    <div id="red"></div>
    <div id="green"></div>
    <div id="blue"></div>
    <div id="cyan"></div>

    <script>
        function reducer(oldState, action) {
            console.log("reducer", oldState, action);

            // ì´ˆê¸° stateê°’ ì§€ì •
            if(oldState === undefined) {
                return {color: 'none'}
            }

            const newState = {...oldState}
            if(action.type === 'CHANGE_COLOR') {
                newState.color = action.color;
            }

            return newState;

        }

        const store = Redux.createStore(reducer); // ìƒì„± ë˜ìë§ˆì reducer í•¨ìˆ˜ë¥¼ 1íšŒ ì‹¤í–‰í•œë‹¤.



        function red(){
            const state = store.getState();
            document.querySelector('#red').innerHTML = `
                <div class="container" style="background-color: ${state.color}">
                    <h1>red</h1>
                    <input type="button" value="fire" onclick="
                        store.dispatch({type:'CHANGE_COLOR', color: 'red'})
                    ">
                </div>
            `;
        }
        red();
        store.subscribe(red);

        function green(){
            const state = store.getState();
            document.querySelector('#green').innerHTML = `
                <div class="container" style="background-color: ${state.color}">
                    <h1>green</h1>
                    <input type="button" value="fire" onclick="
                        store.dispatch({type:'CHANGE_COLOR', color: 'green'})
                    ">
                </div>
            `;
        }
        green();
        store.subscribe(green);
        function blue(){
            const state = store.getState();
            document.querySelector('#blue').innerHTML = `
                <div class="container" style="background-color: ${state.color}">
                    <h1>blue</h1>
                    <input type="button" value="fire" onclick="
                        store.dispatch({type:'CHANGE_COLOR', color: 'blue'})
                    ">
                </div>
            `;
        }
        blue();
        store.subscribe(blue);
        function cyan(){
            const state = store.getState();
            document.querySelector('#cyan').innerHTML = `
                <div class="container" style="background-color: ${state.color}">
                    <h1>cyan</h1>
                    <input type="button" value="fire" onclick="
                    store.dispatch({type:'CHANGE_COLOR', color: 'cyan'})
                    ">
                </div>
            `;
        }
        cyan();
        store.subscribe(cyan);
    </script>
</body>
</html>
```

```jsx
<html>
    <head>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/redux/5.0.0-alpha.0/redux.min.js"></script>
    </head>
    <body>
        <header></header>
        <nav>

        </nav>
        <article>

        </article>
        <script>
            function reducer(oldState, action){
                if(oldState === undefined){
                    return {
                        mode:'WELCOME',
                        topics:[
                            {id:1, title:'html', body:'html is ..'},
                            {id:2, title:'css', body:'css is ..'}
                        ],
                        id:null
                    }
                }
                const newState = {...oldState}
                if(action.type === 'CHANGE_MODE'){
                    newState.mode = action.mode;
                } else if(action.type === 'CHANGE_ID'){
                    newState.id = action.id;
                }

                return newState;
            }
            const store = Redux.createStore(reducer, window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__())
            function Header(){
                document.querySelector('header').innerHTML = `
                    <h1><a href="/" onclick="
                        event.preventDefault();
                        store.dispatch({type:'CHANGE_MODE', mode:'WELCOME'});
                    ">WEB</a></h1>
                `;
            }
            Header();
            function Nav(){
                const state = store.getState();
                let liTag = '';
                for(let i=0; i<state.topics.length; i++){
                    let t = state.topics[i];
                    liTag = liTag + `
                        <li><a href="/read/${t.id}"  onclick="
                            event.preventDefault();
                            store.dispatch({type:'CHANGE_ID', id:${t.id}});
                            store.dispatch({type:'CHANGE_MODE', mode:'READ'});
                        ">${t.title}</a></li>
                    `;
                }
                document.querySelector('nav').innerHTML = `
                <ul>
                    ${liTag}
                </ul>
                `;
            }
            Nav();
            function Article(){
                const state = store.getState();
                let articleTag = '';
                if(state.mode === 'WELCOME'){
                    articleTag = `<h2>Welcome</h2>Hello, WEB!!`;
                } else if(state.mode === 'READ'){
                    let topic;
                    for(let i=0; i<state.topics.length; i++){
                        let t = state.topics[i];
                        if(t.id === state.id){
                            topic = t;
                        }
                    }
                    articleTag = `<h2>${topic.title}</h2>${topic.body}`;
                }
                document.querySelector('article').innerHTML = articleTag;
            }
            store.subscribe(Article);
            Article();
        </script>
    </body>
</html>
```

## ğŸ“ Redux DevTools

```jsx
const store = Redux.createStore(
  reducer,
  window.REDUX_DEVTOOLS_EXTENSION && window.REDUX_DEVTOOLS_EXTENSION()
);
```

## ğŸ’¡ ì˜¤ëŠ˜ ê¹¨ë‹¬ì€ ê²ƒ

- useReducerë‚˜ Context apië¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒë³´ë‹¤ reduxë¥¼ ì‚¬ìš©í•˜ë‹ˆê¹Œ ìƒíƒœ ê´€ë¦¬ë¥¼ ë³´ë‹¤ ì‰½ê²Œ í•  ìˆ˜ ìˆë‹¤. ë˜í•œ ì½”ë“œì˜ ì–‘ë„ í™• ì¤„ì–´ë“¤ì–´ì„œ ëŒ€ë°•ì´ë‹¤!

## ğŸ“Œ ì°¸ê³ 

- [ë¦¬ë•ìŠ¤ ì—¬í–‰ì˜ ì§€ë„ - Redux](https://opentutorials.org/module/4078/24935)
