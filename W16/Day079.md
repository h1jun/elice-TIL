# ğŸ“– ì˜¤ëŠ˜ ë°°ìš´ ë‚´ìš© - 2022.02.17

- ê·¸ë˜í”„ í˜ì´ì§€ ì‹¤ì œ api ì—°ê²° í›„ ë²„ê·¸ ìˆ˜ì •
- ì—°ê°„ ê·¸ë˜í”„ ì½”ë“œ ì‚­ì œ
- ë„¤ë¸Œë°” ë°˜ì‘í˜• ì‘ì—…
- ê·¸ë˜í”„ í˜ì´ì§€ ë°˜ì‘í˜• ì‘ì—…

## ğŸ“ ì‹¤ì œ api ì£¼ì†Œì™€ mock api ì£¼ì†Œê°€ ë‹¤ë¥¼ ë•Œ ì²˜ë¦¬ ë°©ë²•

**ğŸ›  webpack.config.js**

```json
 plugins: [
	...
	...
    new webpack.DefinePlugin({
      "process.env": {
        MODE: JSON.stringify("development"),
        // MODE: JSON.stringify("production"),
        SERVER_URL: JSON.stringify("http://localhost:8888"),
      },
    }),
  ],
```

**ğŸ›  src/utils/api.js**

```js
export const commitsTotalPerMonthURL =
  MODE === "production" ? "/api/users/commits/total/per/year" : "/month";
```

**ğŸ›  src/api/index.js**

```js
import {
  AXIOS,
  badgesURL,
  ...
  commitsTotalPerMonthURL,
  ...
  ...
} from "../utils/api";

// graph - ì›”ê°„
export const getCommitsTotalPerMonth = async (year) => {
  try {
    const res = await AXIOS.get(`${commitsTotalPerMonthURL}/${year}`);
    return res.data;
  } catch (error) {
    return error;
  }
};
```

- json-serverë¥¼ ì´ìš©í•´ì„œ mockë°ì´í„°ë¥¼ ì—°ê²°í•´ì„œ í”„ë¡ íŠ¸ì—”ë“œ ì‘ì—…ì„ ì´ì–´ë‚˜ê°€ê³  ìˆì—ˆë‹¤.
- apiê°€ ì—´ë¦¬ê³  ë‚˜ì„œ ì‹¤ì œ ì£¼ì†Œì™€ ì—°ê²°í•´ì•¼ í•˜ëŠ”ë° mockì„ ì™„ì „íˆ ë²„ë¦´ ìˆ˜ëŠ” ì—†ì—ˆë‹¤. ê¹ƒí—ˆë¸Œ api ìš”ì²­ì´ 5000ë²ˆìœ¼ë¡œ ì œí•œë˜ì–´ ìˆê¸° ë•Œë¬¸ì— ê³„ì†í•´ì„œ ì‹¤ì œ apië¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ëŠ” ìƒí™©ì´ì—ˆë‹¤.
- ì²˜ìŒì—” mock ì „ìš© í´ë”, ì‹¤ì œ api relase ë¸Œëœì¹˜ë¥¼ clone í•œ í´ë”ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì„œ ì‘ì—…í•˜ê³  ìˆì—ˆëŠ”ë° ë¹„íš¨ìœ¨ì ì´ì—ˆë‹¤.
- ì´ëŸ¬í•œ ë¬¸ì œì— ëŒ€í•´ íŒ€ì¥ë‹˜ì´ ìœ„ì™€ ê°™ì€ ì•„ì´ë””ì–´ë¥¼ ë‚´ì£¼ì…¨ê³  í•´ê²°í•´ì£¼ì…¨ë‹¤. ì‘ì—…í•˜ëŠ” ì¤‘ê°„ì— ì—ëŸ¬ê°€ ìƒê²¨ì„œ ë§ì€ ì‹œê°„ì„ ì†Œë¹„í•˜ì…¨ë‹¤. ë¬´í•œí•œ ê°ì‚¬ë¥¼....!
- ì›¹íŒ© ì„¤ì • - MODEì—ì„œ productionì¸ì§€ ì•„ë‹Œì§€ë¥¼ êµ¬ë¶„í•˜ì—¬ ì‹¤ì œ apiì£¼ì†Œ, mockì£¼ì†Œë¡œ ê°ˆì§€ ê²½ë¡œë¥¼ êµ¬ë¶„í•´ì£¼ë©´ ëœë‹¤.

## ğŸ“ useEffect cleanup ì˜¤ë¥˜

> Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in a useEffect cleanup function.
>
> ì–¸ë§ˆìš´íŠ¸ëœ ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” ìƒíƒœë¥¼ ì¶”ì í•  ìˆ˜ ì—†ê³ , ìƒíƒœë¥¼ ì¶”ì í•˜ì§€ ì•Šê¸°ì— ì‘ì—…ì´ ìˆ˜í–‰ë˜ì§€ëŠ” ì•Šì§€ë§Œ, ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë‹ˆ, useEffectì˜ cleanup í•¨ìˆ˜ë¥¼ ì´ìš©í•´ë¼

- ì‹¤ì œ apië¥¼ ì—°ê²°í•˜ê³  í…ŒìŠ¤íŠ¸í•˜ë˜ ì¤‘ ê°œë°œì ë„êµ¬ì—ì„œ ì´ëŸ¬í•œ ì—ëŸ¬ë¥¼ ë§Œë‚  ìˆ˜ ìˆì—ˆë‹¤.

### ğŸ“• ë°œìƒ ì´ìœ 

- fetch ë“± ë¹„ë™ê¸°ë¥¼ ì‹¤í–‰í•˜ëŠ” ì‹¤í–‰ ì»¨í…ìŠ¤íŠ¸ê°€ ì™„ë£Œë˜ê¸° ì „ì— ì»´í¬ë„ŒíŠ¸ê°€ unmountê°€ ëœ í›„ setStateê°€ ì‹¤í–‰ì´ ë  ë•Œ ë°œìƒí•œë‹¤.
- router ì´ë™ í›„, ì´ë™ ì „ ì»´í¬ë„ŒíŠ¸ì—ì„œ stateë¥¼ ë°”ê¾¸ë ¤ëŠ” ì‹œë„ê°€ ìˆì„ ë•Œ ë°œìƒí•œë‹¤.
- ë¹„ë™ê¸° ì²˜ë¦¬ ê³¼ì • ì¤‘ ë°œìƒí•œë‹¤.

### ğŸ’¡ í•´ê²° ë°©ë²• :: useEffectì˜ cleanup í•¨ìˆ˜ ìƒì„±

```jsx
useEffect(() => {
  getUsersReposLanguage();
  return () => {
    setDate(toDay);
    setReposLanguage();
    setLoading(false);
  };
}, []);
```

- useEffectì— returnì„ í•´ì¤˜ì„œ cleanì„ í•´ì¤˜ì•¼ í•œë‹¤.

## ğŸ“ CORS (Cross-Origin Resource Sharing)

- CORSì— ëŒ€í•œ ì„¤ëª…ì„ ì•„ë˜ ë§í¬ì—ì„œ ì•Œì•„ë³´ê³  ì˜¤ì.

- [[TIL\] ì—˜ë¦¬ìŠ¤ SW ì—”ì§€ë‹ˆì–´ íŠ¸ë™ Day 054 - CORS](https://lakelouise.tistory.com/279#ğŸ“-cors)

- [CORSëŠ” ì™œ ì´ë ‡ê²Œ ìš°ë¦¬ë¥¼ í˜ë“¤ê²Œ í•˜ëŠ”ê±¸ê¹Œ?](https://evan-moon.github.io/2020/05/21/about-cors/)

### ğŸ“• ìš°ë¦¬íŒ€ì˜ í•´ê²° ë°©ë²•

> server cors ì„¤ì •ì— localhostë¥¼ ë„£ì–´ì£¼ê³ , clientì—ì„œëŠ” ìš”ì²­ì‹œì— Cookieê°’ì„ ì‹¤ì–´ì„œ ë³´ë‚´ê¸°

```js
// client ì— cookie ë¥¼ ë‹´ê³  ì„œë²„ì—ì„œëŠ” cors ë¥¼
app.use(
  cors({
    origin: "http://localhost:1111",
    credentials: true,
  })
);
```

```js
export const AXIOS = axios.create({
  baseURL: SERVER_URL,
  withCredentials: true, // trueë¡œ ì„¤ì •í•˜ë©´ ì¿ í‚¤ë¥¼ ê°™ì´ ë³´ë‚´ì¤€ë‹¤.
});
```

- [[HTTP\] CORS(Cross Origin Resource Sharing)ë€?](https://armadillo-dev.github.io/http/what-is-cors/)

## ğŸ’¡ ì˜¤ëŠ˜ ê¹¨ë‹¬ì€ ê²ƒ

- ì—°ê°„ ë°ì´í„°ëŠ” api ìš”ì²­ì´ ë§ì•„ì„œ ë¹¼ê¸°ë¡œ ê²°ì •í–ˆë‹¤.
- ì´ˆê¸° ë°ì´í„°ë¥¼ ë°›ì•„ì˜¤ë©´ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥í•´ì„œ ê·¸ ê°’ì„ ë³´ì—¬ì¤„ ìˆ˜ ìˆë‹¤.
  - ì²˜ìŒì—ëŠ” ìƒíƒœ ê°’ì´ ì—†ì–´ì„œ default ê°’ì„ ê°€ì ¸ì˜¤ê³  api ìš”ì²­ ì‹œ dbì— ìˆëŠ” ê°’ì„ ê°€ì ¸ì˜¤ëŠ”ë° ì´ ë¶€ë¶„ì„ ì—†ì• ê¸° ìœ„í•´ì„œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.
  - [Reactì—ì„œ ì›¹ ìŠ¤í† ë¦¬ì§€ ì‚¬ìš©í•˜ê¸°](https://www.daleseo.com/react-hooks-use-web-storage/)
  - [useLocalStorage](https://usehooks.com/useLocalStorage/) ì‚¬ìš©
  - ì´ë ‡ê²Œ í•œë‹¤ë©´ ìš°ë¦¬ ì„œë¹„ìŠ¤ëŠ”
    - ë¡œë”© í˜ì´ì§€(5ì´ˆ ì†Œë¹„)ì— ë°±ì— ëª¨ë“  ìš”ì²­ ê°€ì ¸ì™€ì„œ dbì— ì €ì¥ -> 5ì´ˆ ë’¤ ë©”ì¸ í˜ì´ì§€ ì ‘ê·¼ -> í”„ë¡ íŠ¸ëŠ” ì£¼ì†Œ ê·¸ëŒ€ë¡œ ìš”ì²­í•´ì„œ db ê°’ ê°€ì ¸ì™€ì„œ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ë„£ì–´ì£¼ê³  -> ê·¸ ê°’ì„ ë¹¼ì„œ í™”ë©´ì— ë¿Œë ¤ì£¼ê¸°
  - í˜ì´ì§€ ì´ë™ì‹œ ê¹ƒí—ˆë¸Œ apië¥¼ ìš”ì²­í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê³  dbì— ì €ì¥ëœ ë°ì´í„°ë¥¼ ë¹¼ì˜¤ëŠ” ë¡œì§ì´ë‹¤.
  - ë°ì´í„° ê°±ì‹ ì¸ ì¼ì • ì‹œê°„ ì´í›„ ìš”ì²­ì„ ë°›ìœ¼ë©´ ê°±ì‹ 
- ê¹ƒí—ˆë¸Œ apiëŠ” 1ì‹œê°„ì— 5000ë²ˆì˜ ë¦¬ë°‹ì´ ê±¸ë ¤ìˆë‹¤. ìµœê·¼ 3ê°œë…„ ì»¤ë°‹ ì¶”ì´ ê·¸ë˜í”„ì—ì„œ ì•½ 1500ë²ˆì˜ ìš”ì²­ì„ ì“°ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ë°ì´í„°ë¥¼ ëª» ë°›ì•„ì˜¬ ìˆ˜ ìˆëŠ” ìƒí™©ì´ ìƒê²¨ ì„œë¹„ìŠ¤ë¥¼ ì •ìƒì ìœ¼ë¡œ ìš´ì˜í•˜ê¸° í˜ë“¤ë‹¤ê³  íŒë‹¨í•˜ì—¬ ê³¼ê°í•˜ê²Œ ì œê±°í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.
- tab ë²„íŠ¼ìœ¼ë¡œ ì›”ê°„/ì—°ê°„ì„ ë‚˜ëˆ ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ì„œ êµ¬ì¡°ì— ë§ê²Œ ê°€ê³µí•œ ë’¤ recharts ë¼ì´ë¸ŒëŸ¬ë¦¬ì— ë„£ì–´ì„œ ë°ì´í„° ì‹œê°í™”ë¥¼ í•´ì£¼ëŠ” ë¶€ë¶„ì´ë‹¤.
- ì‹¤ë¬´ì— ê°€ë©´ êµ¬í˜„ ì™„ë£Œí–ˆëŠ”ë° ê¸°íš ë³€ê²½ìœ¼ë¡œ ì¸í•˜ì—¬ ì½”ë“œë¥¼ ì‚­ì œí•˜ê³  ìƒˆë¡­ê²Œ ì‘ì„±í•˜ëŠ” ê²½ìš°ë„ ìˆë‹¤ê³  í•˜ëŠ”ë° ì´ëŸ° ëŠë‚Œì´êµ¬ë‚˜! ê·¸ë˜ë„ ì›”ê°„ì—ì„œ ì‚¬ìš©í•˜ëŠ” LineGraph ì»´í¬ë„ŒíŠ¸ë¥¼ ì¬ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œê°€ ì™„ì „íˆ ì‚­ì œë˜ëŠ” ê±´ ì•„ë‹ˆë‹¤. tab ë¶€ë¶„ ì½”ë“œë§Œ ì‚­ì œí•˜ë©´ ëœë‹¤.
- ì´ë²ˆ ê²½í—˜ìœ¼ë¡œ ì¸í•´ ê¸°íš ë¶€ë¶„ì—ì„œì˜ apiì˜ limitê³¼ ìš°ë¦¬ê°€ í•„ìš”í•œ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ”ë° ì–¼ë§ˆë‚˜ ë§ì€ ìš”ì²­ì„ í•˜ëŠ”ì§€ ì‚¬ì „ì— í™•ì¸í•˜ê³  ê¸°íšì„ í–ˆë‹¤ë©´ í”„ë¡œì íŠ¸ í›„ë°˜ë¶€ì— ì´ëŸ° ìƒí™©ì´ ë°œìƒí•˜ëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆì„ ê±° ê°™ë‹¤. ê°’ì§„ ê²½í—˜ì´ë¼ê³  ìƒê°í•œë‹¤!
- ì´ë²ˆ ê²½í—˜ì„ í†µí•´ ë‹¤ìŒë²ˆì—ëŠ” ê¸°íš ë‹¨ê³„ì—ì„œ ê¼¼ê¼¼í•˜ê²Œ ì¡°ì‚¬í•˜ê³  ì§€ë‚œë²ˆì˜ ì‹¤ìˆ˜ê°€ ë°œìƒë˜ì§€ ì•Šê²Œ ë³´ì™„í•  ìˆ˜ ìˆìœ¼ë‹ˆê¹Œ!
- Promise.allSettled()ëŠ”
- ë„ˆë¬´ ë§ì€ request ìš”ì²­ì„ ë‚ ë¦¬ë©´ ì„œë²„ì— ê³¼ë¶€í•˜ë¥¼ ì¤„ ìˆ˜ ìˆë‹¤.
  - Promise.allSettled()ë¥¼ ì‚¬ìš©í•˜ë©´ ì£¼ì–´ì§„ ëª¨ë“  í”„ë¡œë¯¸ìŠ¤ë¥¼ ì´í–‰í•˜ê±°ë‚˜ ê±°ë¶€í•œ í›„, ê° í”„ë¡œë¯¸ìŠ¤ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ê°ì²´ ë°°ì—´ì„ ë°˜í™˜í•œë‹¤.
  - ì„œë¡œì˜ ì„±ê³µ ì—¬ë¶€ì— ê´€ë ¨ ì—†ëŠ” ì—¬ëŸ¬ ë¹„ë™ê¸° ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼ í•˜ê±°ë‚˜, í•­ìƒ ê° í”„ë¡œë¯¸ìŠ¤ì˜ ì‹¤í–‰ ê²°ê³¼ë¥¼ ì•Œê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•œë‹¤.
  - Promise.allëŠ” í•˜ë¼ë„ ì‹¤íŒ¨í•˜ë©´ ì—ëŸ¬ë¡œ ë¹ ì§€ì§€ë§Œ, Promise.allSettled()ëŠ” í•˜ë‚˜ê°€ ì‹¤íŒ¨í•˜ë”ë¼ë„ ëª¨ë“  promiseë“¤ì˜ ê²°ê³¼ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤.
  - í•˜ë‚˜ê°€ ì‹¤íŒ¨í•˜ë”ë¼ë„ ë‹¤ë¥¸ ê°’ë“¤ì€ ì‚¬ìš©í•´ì•¼ í•  ë•Œ ì‚¬ìš©í•˜ë©´ ì¢‹ë‹¤.

## ğŸ“Œ ì°¸ê³ 

- [React useEffect causing: Can't perform a React state update on an unmounted component](https://stackoverflow.com/questions/54954385/react-useeffect-causing-cant-perform-a-react-state-update-on-an-unmounted-comp)
- [Can't perform a React state update on an unmounted component. This is a no-op, but it indicates a memory leak in your application.](https://kyounghwan01.github.io/blog/React/cant-perform-a-React-state-update-on-an-unmounted-component/)

- [react ì»´í¬ë„ŒíŠ¸ê°€ unmount ëœ í›„ setStateê°€ ì‹¤í–‰ë˜ëŠ” ë¬¸ì œ í•´ê²° ë°©ë²•](https://jcon.tistory.com/190)
- [useEffectì™€ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜](https://yceffort.kr/2021/02/memory-leak-and-useeffect)
- [[react\] useEffect ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ Can't perform a React state update on an unmounted component...](https://goddino.tistory.com/292)

- [CORS and the Access-Control-Allow-Origin response header | Web Security Academy](https://portswigger.net/web-security/cors/access-control-allow-origin)
- [Nginx - Reverse Proxy ì„¤ì • ë° ìš”ì†Œ ì´í•´í•˜ê¸°](https://phsun102.tistory.com/47)
- [CORSëŠ” ì™œ ì´ë ‡ê²Œ ìš°ë¦¬ë¥¼ í˜ë“¤ê²Œ í•˜ëŠ”ê±¸ê¹Œ?](https://evan-moon.github.io/2020/05/21/about-cors/)
- [Changing Theme Color of Address Bar in Mobile Browsers](https://usefulangle.com/post/243/change-browser-address-bar-theme-color-with-html-meta-tag)
- [PWA(Progressive Web Apps) Manifest ë§Œë“¤ê¸°](https://uxgjs.tistory.com/225)
- [Promise.allSettled ê°€ í•„ìš”í•œ ìˆœê°„](https://velog.io/@eggplantiny/Promise.allSettled-ê°€-í•„ìš”í•œ-ìˆœê°„)
- [Promise.all ê³¼ Promise.allSettled ì˜ ì°¨ì´](https://velog.io/@ansrjsdn/Promise.all-ê³¼-Promise.allSettled-ì˜-ì°¨ì´)
